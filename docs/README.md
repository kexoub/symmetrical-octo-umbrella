# é¡¹ç›®æ–‡æ¡£ç´¢å¼•

## ğŸ“š ä¸»è¦æ–‡æ¡£

### éƒ¨ç½²å’Œé…ç½®
- [éƒ¨ç½²æŒ‡å—.md](../éƒ¨ç½²æŒ‡å—.md) - é¡¹ç›®éƒ¨ç½²å®Œæ•´æŒ‡å—
- [D1 æ•°æ®åº“æŒ‡å—](D1-guide.md) - D1 æ•°æ®åº“è¯¦ç»†ä½¿ç”¨è¯´æ˜
- [D1 å¿«é€Ÿå‚è€ƒ](D1-cheatsheet.md) - D1 å¸¸ç”¨å‘½ä»¤å’Œä»£ç é€ŸæŸ¥è¡¨

### æ•°æ®åº“
- [æ•°æ®åº“ Schema](database-schema.sql) - å®Œæ•´çš„æ•°æ®åº“ç»“æ„å®šä¹‰
- [æ•°æ®åº“è¿ç§»](../worker/migrations/) - æ‰€æœ‰æ•°æ®åº“è¿ç§»æ–‡ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å®‰è£… Wrangler
npm install -g wrangler

# ç™»å½• Cloudflare
wrangler login
```

### 2. æ•°æ®åº“è®¾ç½®
```bash
# åˆ›å»º D1 æ•°æ®åº“
wrangler d1 create community-db

# è¿è¡Œè¿ç§»
yarn db:migrate
```

### 3. é…ç½® S3 å­˜å‚¨
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹
cp .env.example .env

# ç¼–è¾‘ .env å¡«å…¥ S3 é…ç½®
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
yarn dev
```

## ğŸ“– å­¦ä¹ è·¯å¾„

### æ–°æ‰‹å…¥é—¨
1. é˜…è¯» [éƒ¨ç½²æŒ‡å—.md](../éƒ¨ç½²æŒ‡å—.md) äº†è§£æ•´ä½“æ¶æ„
2. æŸ¥çœ‹ [D1 å¿«é€Ÿå‚è€ƒ](D1-cheatsheet.md) å­¦ä¹ åŸºæœ¬æ“ä½œ
3. å‚è€ƒ [æ•°æ®åº“ Schema](database-schema.sql) äº†è§£æ•°æ®ç»“æ„

### è¿›é˜¶å¼€å‘
1. æ·±å…¥å­¦ä¹  [D1 æ•°æ®åº“æŒ‡å—](D1-guide.md)
2. æŸ¥çœ‹ä»£ç ç¤ºä¾‹: `worker/src/routes/examples.ts`
3. ç ”ç©¶ç°æœ‰è·¯ç”±å®ç°: `worker/src/routes/`

### æ•°æ®åº“ç®¡ç†
1. å¸¸ç”¨å‘½ä»¤å‚è€ƒ [D1 å¿«é€Ÿå‚è€ƒ](D1-cheatsheet.md#å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨)
2. æ€§èƒ½ä¼˜åŒ–æŸ¥çœ‹ [D1 æ•°æ®åº“æŒ‡å—](D1-guide.md#æœ€ä½³å®è·µ)
3. æ•…éšœæ’é™¤å‚è€ƒ [D1 æ•°æ®åº“æŒ‡å—](D1-guide.md#æ•…éšœæ’é™¤)

## ğŸ”§ å¸¸ç”¨æ“ä½œ

### æ•°æ®åº“æ“ä½œ
```bash
# æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨
wrangler d1 list

# æ‰§è¡ŒæŸ¥è¯¢
wrangler d1 execute DB --local --command="SELECT * FROM Users LIMIT 5"

# åˆ›å»ºè¿ç§»
wrangler d1 migrations create DB add_new_feature

# è¿è¡Œè¿ç§»
yarn db:migrate
```

### éƒ¨ç½²æ“ä½œ
```bash
# æœ¬åœ°å¼€å‘
yarn dev

# æ„å»ºå‰ç«¯
yarn build

# éƒ¨ç½²åˆ°çº¿ä¸Š
yarn deploy
```

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
serverless-bbs/
â”œâ”€â”€ docs/                       # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ D1-guide.md            # D1 æ•°æ®åº“æŒ‡å—
â”‚   â”œâ”€â”€ D1-cheatsheet.md       # D1 å¿«é€Ÿå‚è€ƒ
â”‚   â”œâ”€â”€ database-schema.sql    # æ•°æ®åº“ Schema
â”‚   â””â”€â”€ README.md              # æœ¬æ–‡æ¡£
â”œâ”€â”€ worker/                     # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ lib/               # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ types.ts           # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts           # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ migrations/            # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ ui/                         # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/        # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/          # React Context
â”‚   â”‚   â””â”€â”€ lib/               # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ dist/                  # æ„å»ºè¾“å‡º
â”œâ”€â”€ wrangler.jsonc             # Wrangler é…ç½®
â”œâ”€â”€ package.json               # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é‡ç½®æœ¬åœ°æ•°æ®åº“ï¼Ÿ
```bash
# åˆ é™¤æœ¬åœ°æ•°æ®åº“æ–‡ä»¶
rm -rf .wrangler/state/d1/

# é‡æ–°è¿è¡Œè¿ç§»
yarn db:migrate
```

### Q: å¦‚ä½•æŸ¥çœ‹æ‰§è¡Œçš„ SQLï¼Ÿ
åœ¨ä»£ç ä¸­æ·»åŠ æ—¥å¿—ï¼š
```typescript
console.log('SQL:', 'SELECT * FROM Users WHERE id = ?');
console.log('Params:', [userId]);
```

### Q: å¦‚ä½•å¯¼å‡ºçº¿ä¸Šæ•°æ®åº“ï¼Ÿ
```bash
wrangler d1 export DB --remote --output=./backup.sql
```

### Q: æ‰¹é‡æ“ä½œå¤±è´¥æ€ä¹ˆåŠï¼Ÿ
- æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„ä¸»é”®
- ç¡®ä¿å¤–é”®å…³è”çš„è®°å½•å­˜åœ¨
- åˆ†æ‰¹å¤„ç†å¤§é‡æ•°æ®ï¼ˆæ¯æ‰¹ä¸è¶…è¿‡100æ¡ï¼‰

## ğŸ”— å¤–éƒ¨èµ„æº

- [Cloudflare Workers æ–‡æ¡£](https://developers.cloudflare.com/workers/)
- [Cloudflare D1 æ–‡æ¡£](https://developers.cloudflare.com/d1/)
- [Hono æ¡†æ¶æ–‡æ¡£](https://hono.dev/)
- [SQLite è¯­æ³•](https://www.sqlite.org/lang.html)

## ğŸ“ æ›´æ–°æ—¥å¿—

### æœ€æ–°æ›´æ–°
- æ·»åŠ  S3 å¯¹è±¡å­˜å‚¨æ”¯æŒ
- å®Œå–„ D1 æ•°æ®åº“æ–‡æ¡£
- ä¼˜åŒ–å‰ç«¯ UI ç»„ä»¶
- æ”¹è¿›é”™è¯¯å¤„ç†æœºåˆ¶

---

**æç¤º**: å¦‚æœæ‚¨å‘ç°æ–‡æ¡£æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¡¥å……ï¼Œæ¬¢è¿æäº¤ Issue æˆ– PRã€‚
